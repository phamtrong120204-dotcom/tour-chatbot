<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ph·∫°m Tr·ªçng - T∆∞ v·∫•n tour R·ª´ng d·ª´a B·∫£y M·∫´u</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">Ph·∫°m Tr·ªçng</div>
      <div class="sub">T∆∞ v·∫•n tour | Gi√° chu·∫©n ‚Äì H·ªó tr·ª£ nhanh </div>
    </header>

    <main id="chat" class="chat"></main>

    <form id="form" class="bar">
      <input id="input" type="text" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." autocomplete="off" />
      <button type="submit">G·ª≠i</button>
    </form>

    <footer class="foot">
      <span id="status">S·∫µn s√†ng</span>
    </footer>
  </div>
<script>
const API_URL = "https://tour-chatbot-api.vercel.app/api/chat";

const chat = document.getElementById("chat");
const form = document.getElementById("form");
const input = document.getElementById("input");
const status = document.getElementById("status");

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

addMessage(
  "Xin ch√†o üëã B·∫°n mu·ªën h·ªèi v·ªÅ tour n√†o? (ng√†y ƒëi & s·ªë ng∆∞·ªùi gi√∫p m√¨nh t∆∞ v·∫•n ch√≠nh x√°c h∆°n)",
  "bot"
);

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const message = input.value.trim();
  if (!message) return;

  addMessage(message, "user");
  input.value = "";
  status.textContent = "ƒêang tr·∫£ l·ªùi...";

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ message })
    });

    if (!res.ok) {
      throw new Error("HTTP error " + res.status);
    }

    const data = await res.json();

    if (data.reply) {
      addMessage(data.reply, "bot");
    } else {
      addMessage("Bot kh√¥ng c√≥ ph·∫£n h·ªìi ph√π h·ª£p.", "bot");
    }
  } catch (err) {
    console.error("FETCH ERROR:", err);
    addMessage("L·ªói k·∫øt n·ªëi. B·∫°n th·ª≠ l·∫°i sau nh√©!", "bot");
  } finally {
    status.textContent = "S·∫µn s√†ng";
  }
});
</script>
<!-- ===== Floating Contact Buttons (Zalo + Call) ===== -->
<div class="floating-contact">
  <!-- Zalo -->
  <a class="btn-zalo" href="https://zalo.me/0774546748" target="_blank">
    Zalo
  </a>

  <!-- Call -->
  <a class="btn-call" href="tel:0774546748">
    G·ªçi
  </a>
</div>

<style>
  .floating-contact{
    position: fixed;
    right: 16px;
    bottom: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 9999;
    font-family: Arial, sans-serif;
  }
  .floating-contact a{
    display: flex;
    align-items: center;
    justify-content: center;
    width: 64px;
    height: 64px;
    border-radius: 999px;
    color: #fff;
    text-decoration: none;
    font-weight: bold;
    box-shadow: 0 10px 25px rgba(0,0,0,.2);
  }
  .btn-zalo{ background:#0068ff; }
  .btn-call{ background:#111; }
</style>
</body>
</html>
